<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home - My Collections</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='home_styles.css') }}"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav>
      <a href="{{ url_for('auth.login_page') }}">Get Started</a>
      <!-- Updated to redirect to login page -->
      <a href="{{ url_for('about') }}">About Us</a>
      <a href="{{ url_for('contact') }}">Contact</a>
    </nav>

    <!-- Hero Section with Background Slideshow -->
    <div class="hero">
      <div class="hero-overlay">
        <h1>Welcome to My Collections</h1>
        <p>Track, manage, and analyze your collectibles.</p>
        <a href="{{ url_for('auth.login_page') }}" class="btn">Get Started</a>
      </div>
    </div>

    <!-- Page Content -->
    <div class="content">
      <h2>Why Choose Us?</h2>
      <p>
        We provide the best tools to manage your collections efficiently and
        effectively.
      </p>
    </div>

    <!-- Footer -->
    <footer>
      <p>&copy; 2025 My Collections</p>
    </footer>

    <!-- JavaScript for Background Slideshow -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Use absolute URLs with proper path structure to ensure images are found
        const images = [
          "/static/images/img1.png",
          "/static/images/img2.jpg",
          "/static/images/img3.jpg",
          "/static/images/img4.jpg",
          "/static/images/img5.jpg",
        ];

        let index = 1; // Start from img2 after img1 loads
        const heroSection = document.querySelector(".hero");

        if (!heroSection) {
          console.error("Hero section not found!");
          return;
        }

        // Function to preload all images
        function preloadImages() {
          images.forEach((src) => {
            const img = new Image();
            img.src = src;
            console.log("Preloading:", src);
          });
        }

        // Function to change the background image
        function changeBackground() {
          console.log("Changing background to:", images[index]);
          heroSection.style.backgroundImage = `url('${images[index]}')`;
          index = (index + 1) % images.length; // Loop through images
        }

        // Add a fallback in case images fail to load
        function handleImageError() {
          // Use a solid color background if images fail to load
          heroSection.style.backgroundImage = "none";
          heroSection.style.backgroundColor = "#777"; // Gray background as fallback
        }

        // Start the carousel with error handling
        try {
          preloadImages(); // Preload images to prevent flickering

          // Set the initial background image with error handling
          console.log("Setting initial background:", images[0]);
          const initialImage = new Image();
          initialImage.onload = () => {
            heroSection.style.backgroundImage = `url('${images[0]}')`;
          };
          initialImage.onerror = handleImageError;
          initialImage.src = images[0];

          // Set up the carousel interval
          setTimeout(() => {
            changeBackground(); // Transition to img2 after 7s
            setInterval(changeBackground, 7000); // Continue slideshow
          }, 7000);
        } catch (error) {
          console.error("Error in slideshow:", error);
          handleImageError();
        }
      });
    </script>
  </body>
</html>
